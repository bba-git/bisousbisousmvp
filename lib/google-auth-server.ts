import { google } from "googleapis"; const oauth2Client = new google.auth.OAuth2(process.env.GOOGLE_CLIENT_ID, process.env.GOOGLE_CLIENT_SECRET, process.env.GOOGLE_REDIRECT_URI); export async function exchangeCodeForTokens(code: string) { try { const { tokens } = await oauth2Client.getToken(code); oauth2Client.setCredentials(tokens); return tokens; } catch (error) { console.error("Error exchanging code for tokens:", error); throw error; } } export async function refreshAccessToken(refreshToken: string) { try { oauth2Client.setCredentials({ refresh_token: refreshToken }); const { credentials } = await oauth2Client.refreshAccessToken(); return { accessToken: credentials.access_token, refreshToken: credentials.refresh_token, expiryDate: credentials.expiry_date }; } catch (error) { console.error("Error refreshing access token:", error); throw error; } }
